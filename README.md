# 智能自动答题系统

一个支持动态获取课程、本地题库和API搜题的智能答题系统。

## 功能特点

- ✅ 自动登录
- ✅ 动态获取用户的所有课程
- ✅ 智能识别课程类型（有题库 vs 需搜题）
- ✅ 双重答题策略：本地题库 + API搜题
- ✅ 支持所有课程（包括无答案的课程）

## 文件结构

```
自动答题/
├── auto_login.py           # 登录模块
├── api_client.py           # API客户端
├── smart_quiz_api.py       # 主程序 ⭐
├── test_api.py             # API测试工具
├── youhou.js               # 油猴脚本参考
├── question_bank.json       # 题库数据
├── README.md               # 本文件
└── API_README.md           # API详细文档
```

## 快速开始

### 1. 安装依赖

```bash
pip install httpx beautifulsoup4
```

### 2. 运行主程序

```bash
python smart_quiz_api.py
```

### 3. 测试API连接

```bash
python test_api.py
```

## 使用说明

### 运行主程序

```bash
python smart_quiz_api.py
```

程序会：
1. 自动登录
2. 测试API连接
3. 获取所有课程
4. 识别课程类型
5. 加载/更新本地题库
6. 让你选择答题范围
7. 自动答题

### 答题流程

```
1. 登录系统
   ↓
2. 测试API连接
   ↓
3. 获取所有课程
   ↓
4. 识别课程类型
   ├─ [有题库] 马克思主义基本原理、中华民族共同体概论等
   └─ [需搜题] 其他所有课程
   ↓
5. 更新本地题库（仅目标课程）
   ↓
6. 选择答题范围
   ├─ 1. 全部课程
   ├─ 2. 仅目标课程
   └─ 3. 仅其他课程
   ↓
7. 自动答题
   ├─ 先查本地题库
   └─ 没有则API搜题
```

## API配置

### API信息

- **地址**: `http://8.155.30.94:5000/api/get_answer`
- **密钥**: `bot666`
- **状态**: ✅ 已测试成功

### 请求格式

```json
{
  "questionId": "q_123456",
  "title": "题目文本",
  "isMultiple": false,
  "options": [
    {"value": "A", "text": "选项A"},
    {"value": "B", "text": "选项B"}
  ],
  "courseInfo": {
    "courseName": "课程名称",
    "chapter": "章节名称"
  }
}
```

### 响应格式

```json
{
  "success": true,
  "message": "查询成功",
  "data": {
    "correctAnswer": "D",
    "isValid": true,
    "options": [...]
  }
}
```

## 题库信息

### 已收录课程

| 课程名称 | 章节数 | 题目数 |
|---------|-------|-------|
| 马克思主义基本原理 | 8 | 240 |
| 中华民族共同体概论 | 16 | 445 |
| **合计** | **24** | **685** |

### 题库文件

- **文件名**: `question_bank.json`
- **格式**: JSON
- **内容**: 所有题目的文本、选项和答案

## 答题策略

### 有题库的课程
1. 优先从本地题库查找答案
2. 如果本地没有，调用API搜题
3. 自动选择答案

### 无题库的课程
1. 直接调用API搜题
2. 获取答案后自动选择
3. 实时动态搜题

## 注意事项

1. **API使用**: API有剩余Tokens限制，请合理使用
2. **网络连接**: 需要能访问API服务器
3. **答案确认**: 提交前会显示选中的答案，请确认后再提交
4. **账号配置**: 修改 `auto_login.py` 中的 `username` 和 `password`

## 故障排除

### API连接失败

```bash
# 检查API连接
python test_api.py
```

### 登录失败

1. 检查网络连接
2. 检查账号密码
3. 修改 `auto_login.py` 中的登录信息

### 找不到题目

1. 确保在答题页面
2. 检查页面是否加载完成
3. 刷新页面重试

### 编码问题

确保使用UTF-8编码运行脚本：

```bash
chcp 65001
python smart_quiz_api.py
```

## 常见问题

**Q: 如何更换账号？**
A: 修改 `auto_login.py` 中的 `username` 和 `password`。

**Q: 如何添加新课程？**
A: 程序会自动获取所有课程，无需手动添加。

**Q: API搜题失败怎么办？**
A: 检查网络连接和API密钥，或使用本地题库。

**Q: 如何只使用本地题库？**
A: 在答题时选择"仅目标课程"。

**Q: 能否离线使用？**
A: 有题库的课程可以离线使用，无题库的课程需要API。

## 技术要求

- Python 3.6+
- httpx 库
- beautifulsoup4 库

## 许可证

仅供学习使用，请勿用于商业用途。

## 更新日志

### v3.0 (最新)
- ✨ 集成API搜题功能
- ✨ 支持无答案的课程
- ✨ 双重答题策略
- 🧹 整理项目文件结构

### v2.0
- ✨ 动态获取课程
- ✨ 智能识别目标课程

### v1.0
- 🎉 初始版本
- 本地题库答题

## 联系方式

如有问题，请查看 `API_README.md` 获取更多API详情。
